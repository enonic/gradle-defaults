plugins {
    id 'groovy'
    id 'java-gradle-plugin'
    id 'com.jfrog.artifactory' version '4.4.13'
    id 'maven-publish'
}

version = '1.0.0'
group = 'com.enonic.gradle'

repositories {
    jcenter()
}

dependencies {
    compile gradleApi()
    compile localGroovy()
    compile 'org.jfrog.buildinfo:build-info-extractor-gradle:4.4.13'
}

publishing {
    publications {
        mavenJava( MavenPublication ) {
            from components.java
        }
    }
}

artifactory {
    contextUrl = 'https://repo.enonic.com'
    publish {
        repository {
            repoKey = 'public'
            username = project.findProperty( 'repoUser' )
            password = project.findProperty( 'repoPassword' )
        }
        defaults {
            publishBuildInfo = false
            publications( 'mavenJava' )
        }
    }
}
